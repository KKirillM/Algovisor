#pragma once

#ifdef P2REPLISAMFFDB_EXPORTS
#define P2REPLISAMFFDB_API P2_API_EXPORTS
#else
#define P2REPLISAMFFDB_API P2_API_IMPORTS
#endif

#ifdef  __cplusplus
extern "C" {
#endif

#include "../../../Plaza-II-Repl/P2ReplServer/Include/P2ReplServer.h"
#include "../../../Plaza-II-DB/P2Tbl/Include/P2Tbl.h"

P2REPLISAMFFDB_API P2ERR P2CALLSPEC P2ReplServerBind2ISAM(P2REPL_SERVER_HANDLE handle, const char *serviceName, P2MQ_CONN_HANDLE connHandle, P2TBL_CONN_HANDLE isamHandle, P2DB_SCHEME_HANDLE replScheme, P2DB_SCHEME_HANDLE filterScheme);
P2REPLISAMFFDB_API P2ERR P2CALLSPEC P2ReplServerBindFromSectionISAM(P2REPL_SERVER_HANDLE handle, P2MQ_CONN_HANDLE connHandle, P2TBL_CONN_HANDLE tblHandle, const char *sectionName);

P2REPLISAMFFDB_API P2ERR P2CALLSPEC P2ReplPostOnlineISAM(P2TBL_CONN_HANDLE conn, const char *primaryTblName, P2REPL_REVISION_TYPE *pRev);
P2REPLISAMFFDB_API P2ERR P2CALLSPEC P2ReplPostOnline2ISAM(P2TBL_CONN_HANDLE conn, P2DB_TABLE_SCHEME_HANDLE tblSch, P2REPL_REVISION_TYPE *pRev);

P2REPLISAMFFDB_API P2ERR P2CALLSPEC P2ReplServerPostClearedISAM(P2TBL_TABLE_HANDLE tbl);

//P2REPLISAMFFDB_API P2ERR P2CALLSPEC P2ReplServerSetACLFromTableISAM(P2REPL_SERVER_HANDLE handle, P2TBL_TABLE_HANDLE tbl);
//P2REPLISAMFFDB_API P2ERR P2CALLSPEC P2ReplServerSetFilterFromTableISAM(P2REPL_SERVER_HANDLE handle, P2TBL_TABLE_HANDLE tbl);

P2REPLISAMFFDB_API P2ERR P2CALLSPEC P2TBLLoadTableFromFFDB(P2TBL_CONN_HANDLE hIsamConn, size_t tblIdx, PCSTR ffdbPath, P2REPL_ID_TYPE* pID, P2REPL_ID_TYPE* pMaxIDRev, P2REPL_REVISION_TYPE* pRev);
P2REPLISAMFFDB_API P2ERR P2CALLSPEC P2TBLGetMaxIdRevFromFFDB(P2TBL_CONN_HANDLE hIsamConn, size_t tblIdx, PCSTR ffdbPath, P2REPL_ID_TYPE* pID, P2REPL_ID_TYPE* pMaxIDRev, P2REPL_REVISION_TYPE* pRev);
P2REPLISAMFFDB_API P2ERR P2CALLSPEC P2FFDBGetScheme(const char *path, const char *schemeName, P2DB_SCHEME_HANDLE *pSch);


#ifdef  __cplusplus
}
#endif


